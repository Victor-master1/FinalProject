{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\quisp\\\\Desktop\\\\FinalProject\\\\frontend\\\\src\\\\components\\\\SignLanguageCalculator.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback, useMemo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { XCircle, CheckCircle, RefreshCw, Power, Zap, Equal // Icono para el botón de cálculo\n} from \"lucide-react\";\nimport toast from \"react-hot-toast\";\n\n// --- TIPOS Y SIMULACIONES para entorno de archivo único ---\n// Tipos simulados de MediaPipe (se asume que el archivo original tenía tipado)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Implementación Simulada de la API\nconst api = {\n  post: async (path, data) => {\n    // ... Lógica de simulación (mantenida del archivo anterior)\n    const mockPredictions = [\"1\", \"2\", \"3\", \"4\", \"+\", \"*\", \"equal\", \"clear\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"/\"];\n    const randomPrediction = mockPredictions[Math.floor(Math.random() * mockPredictions.length)];\n    await new Promise(resolve => setTimeout(resolve, 150));\n    return {\n      data: {\n        prediction: randomPrediction,\n        confidence: Math.random() * 0.3 + 0.7\n      }\n    };\n  }\n};\n\n// Implementación Simulada de MediaPipeHandler\n\nconst createMediaPipeHandler = () => {\n  let stream = null;\n  let animationFrameId = null;\n  let videoElement = null;\n  let canvasElement = null;\n  let onResultsCallback = null;\n  const runDetectionLoop = () => {\n    if (!videoElement || !canvasElement || !onResultsCallback) return;\n\n    // SIMULACIÓN DE DETECCIÓN Y RESULTADOS\n    const hasHands = stream && Math.random() > 0.3; // Simula detección\n    const mockResults = {\n      multiHandLandmarks: hasHands ? [Array.from({\n        length: 21\n      }, (_, i) => ({\n        x: Math.random(),\n        y: Math.random(),\n        z: Math.random(),\n        visibility: 1\n      }))] : null,\n      // Puede ser NULL, como indica el error de TS\n      image: canvasElement,\n      multiHandedness: hasHands ? [{\n        label: 'Right',\n        score: 0.9\n      }] : null\n    };\n    onResultsCallback(mockResults);\n\n    // Dibujo en Canvas\n    const canvasCtx = canvasElement.getContext('2d');\n    if (canvasCtx) {\n      canvasCtx.save();\n      canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n      if (videoElement.readyState === videoElement.HAVE_ENOUGH_DATA) {\n        canvasCtx.drawImage(videoElement, 0, 0, canvasElement.width, canvasElement.height);\n      }\n      if (!stream) {\n        canvasCtx.fillStyle = 'white';\n        canvasCtx.fillRect(0, 0, canvasElement.width, canvasElement.height);\n        canvasCtx.fillStyle = 'black';\n        canvasCtx.font = '24px Inter, sans-serif';\n        canvasCtx.textAlign = 'center';\n        canvasCtx.fillText('Cámara detenida', canvasElement.width / 2, canvasElement.height / 2);\n      }\n      canvasCtx.restore();\n    }\n    animationFrameId = requestAnimationFrame(runDetectionLoop);\n  };\n  const initialize = async (video, canvas, onResults) => {\n    videoElement = video;\n    canvasElement = canvas;\n    onResultsCallback = onResults;\n    try {\n      stream = await navigator.mediaDevices.getUserMedia({\n        video: true\n      });\n      video.srcObject = stream;\n      await new Promise(resolve => {\n        video.onloadedmetadata = () => {\n          video.play();\n          resolve(true);\n        };\n      });\n      runDetectionLoop();\n      return true;\n    } catch (error) {\n      console.error(\"Error al acceder a la cámara:\", error);\n      return false;\n    }\n  };\n  const stop = () => {\n    if (animationFrameId !== null) {\n      cancelAnimationFrame(animationFrameId);\n      animationFrameId = null;\n    }\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      stream = null;\n      if (videoElement) {\n        videoElement.srcObject = null;\n      }\n    }\n  };\n  return {\n    initialize,\n    stop\n  };\n};\n// -------------------------------------------------------------------\n\n/**\r\n * Props\r\n */\n\n/**\r\n * Constants\r\n */\nconst RECOGNITION_INTERVAL_MS = 650;\nconst MIN_CONFIDENCE_THRESHOLD = 0.7;\n\n/**\r\n * Safe evaluation (sanitizado)\r\n */\nconst safeEvaluateExpression = expr => {\n  const sanitized = expr.replace(/[^0-9+\\-*/.]/g, \"\");\n  if (!sanitized) return \"0\";\n  try {\n    // eslint-disable-next-line no-new-func\n    const val = Function(`\"use strict\"; return (${sanitized});`)();\n    if (typeof val === \"number\" && isFinite(val)) return String(val);\n    return \"Error\";\n  } catch {\n    return \"Error\";\n  }\n};\n/**\r\n * UI InputBlock\r\n */\nconst InputBlock = ({\n  title,\n  value,\n  isActive,\n  dark\n}) => {\n  const base = \"p-4 rounded-xl font-bold text-center border-2 transition-all duration-300 shadow-md\";\n  const bg = dark ? \"bg-gray-800\" : \"bg-white\";\n  const border = isActive ? \"border-indigo-400 ring-4 ring-indigo-500/30\" : dark ? \"border-gray-600\" : \"border-gray-300\";\n  const text = dark ? \"text-white\" : \"text-gray-900\";\n  const titleColor = dark ? \"text-gray-400\" : \"text-gray-600\";\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: `${base} ${bg} ${border}`,\n    animate: {\n      scale: isActive ? 1.03 : 1\n    },\n    transition: {\n      type: \"spring\",\n      stiffness: 300,\n      damping: 25\n    },\n    children: [\"\\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `text-sm uppercase tracking-wider ${titleColor}`,\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), \"\\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `text-3xl mt-1 ${text}`,\n      children: value || (isActive ? \"✋\" : \"—\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), \"\\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 5\n  }, this);\n};\n\n/**\r\n * Component\r\n */\n_c = InputBlock;\nconst SignLanguageCalculator = ({\n  modelId\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  // Renombrado de mpHandler a mediaPipeHandler para consistencia\n  const mediaPipeHandler = useRef(null);\n  const [cameraActive, setCameraActive] = useState(false);\n  const [isInitializing, setIsInitializing] = useState(false);\n  const [handsDetected, setHandsDetected] = useState(false);\n  const [isAutoRecognizing, setIsAutoRecognizing] = useState(true);\n  const [isPredicting, setIsPredicting] = useState(false);\n  const [calcState, setCalcState] = useState({\n    num1: \"\",\n    operator: \"\",\n    num2: \"\",\n    result: \"\",\n    activeBlock: \"num1\"\n  });\n  const lastPredictionRef = useRef(null);\n  const currentLandmarksRef = useRef(null);\n  const recognitionIntervalRef = useRef(null);\n  const isDarkMode = useMemo(() => document.body.classList.contains(\"dark\"), []);\n\n  /**\r\n   * CORRECCIÓN 1/3 (Manejo de null en multiHandLandmarks)\r\n   * MediaPipe results callback (support for up to 2 hands)\r\n   */\n  const onResults = useCallback(results => {\n    // Verificar si multiHandLandmarks es null o si su longitud es 0.\n    const hasHands = !!(results.multiHandLandmarks && results.multiHandLandmarks.length > 0);\n    setHandsDetected(hasHands);\n\n    // Si hay manos, procesar. Si no, currentLandmarksRef.current será null.\n    if (hasHands) {\n      const landmarks = results.multiHandLandmarks; // Aseguramos que no es null aquí\n      const handedness = results.multiHandedness;\n      let chosen = landmarks[0];\n\n      // Preferir la mano derecha si está presente y hay datos de handedness\n      if (handedness && handedness.length > 0) {\n        const rightIndex = handedness.findIndex(h => {\n          var _h$label, _h$label$toLowerCase;\n          return ((_h$label = h.label) === null || _h$label === void 0 ? void 0 : (_h$label$toLowerCase = _h$label.toLowerCase) === null || _h$label$toLowerCase === void 0 ? void 0 : _h$label$toLowerCase.call(_h$label)) === \"right\";\n        });\n        if (rightIndex >= 0 && landmarks[rightIndex]) {\n          chosen = landmarks[rightIndex];\n        }\n      }\n\n      // Verificar la estructura de la mano elegida\n      if (chosen && chosen.length === 21) {\n        currentLandmarksRef.current = chosen.map(l => ({\n          x: l.x,\n          y: l.y,\n          z: l.z\n        }));\n      } else {\n        currentLandmarksRef.current = null;\n      }\n    } else {\n      currentLandmarksRef.current = null;\n    }\n  }, []);\n\n  // start / stop camera\n  const startCamera = useCallback(async () => {\n    if (!videoRef.current || !canvasRef.current) {\n      toast.error(\"No se encontró video/canvas\");\n      return;\n    }\n    setIsInitializing(true);\n    try {\n      if (mediaPipeHandler.current) mediaPipeHandler.current.stop();\n      mediaPipeHandler.current = createMediaPipeHandler();\n      const ok = await mediaPipeHandler.current.initialize(videoRef.current, canvasRef.current, onResults);\n      if (!ok) throw new Error(\"Error inicializando MediaPipe\");\n      setCameraActive(true);\n      setIsAutoRecognizing(true);\n      toast.success(\"Cámara iniciada\");\n    } catch (err) {\n      console.error(err);\n      toast.error(\"No se pudo iniciar la cámara\");\n    } finally {\n      setIsInitializing(false);\n    }\n  }, [onResults]);\n\n  /**\r\n   * CORRECCIÓN 2/3 (Manejo de 'null' en clearInterval para tipado de referencia)\r\n   */\n  const stopCamera = useCallback(() => {\n    if (mediaPipeHandler.current) mediaPipeHandler.current.stop();\n    setCameraActive(false);\n    setIsAutoRecognizing(false);\n    setHandsDetected(false);\n    currentLandmarksRef.current = null;\n    lastPredictionRef.current = null;\n    if (recognitionIntervalRef.current !== null) {\n      // ⚠️ CORRECCIÓN AQUÍ: Simplemente llamamos a clearInterval.\n      // Ya no intentamos asignar su valor de retorno, que puede ser 'null', \n      // a 'recognitionIntervalRef.current' que es de tipo 'number | null'.\n      // En su lugar, lo establecemos explícitamente a 'null' después de limpiar.\n      clearInterval(recognitionIntervalRef.current);\n      recognitionIntervalRef.current = null;\n    }\n    toast.success(\"Cámara detenida\");\n  }, []);\n\n  // reset calculator state\n  const resetCalculator = useCallback(() => {\n    setCalcState({\n      num1: \"\",\n      operator: \"\",\n      num2: \"\",\n      result: \"\",\n      activeBlock: \"num1\"\n    });\n  }, []);\n\n  /**\r\n   * NUEVA FUNCIÓN: Ejecuta la lógica de cálculo y actualiza el estado del resultado.\r\n   */\n  const calculateResult = useCallback(() => {\n    setCalcState(prev => {\n      if (!prev.num1 || !prev.operator || !prev.num2) {\n        toast.error(\"Asegúrate de tener un número, un operador y otro número.\", {\n          icon: \"🤔\"\n        });\n        return prev;\n      }\n      const expression = `${prev.num1}${prev.operator}${prev.num2}`;\n      const evalResult = safeEvaluateExpression(expression);\n      if (evalResult === \"Error\") {\n        toast.error(\"Expresión inválida\", {\n          icon: \"⚠️\"\n        });\n        return {\n          ...prev,\n          result: \"Error\"\n        };\n      }\n\n      // Cálculo exitoso: movemos el resultado a num1 y limpiamos para encadenar\n      toast.success(`Resultado: ${evalResult}`, {\n        icon: \"✅\"\n      });\n      return {\n        num1: evalResult,\n        // El resultado se convierte en el Num1 para encadenar\n        operator: '',\n        num2: '',\n        result: evalResult,\n        activeBlock: 'operator' // Esperamos el siguiente operador\n      };\n    });\n  }, []);\n\n  // process prediction into calculation state\n  const processPrediction = useCallback(prediction => {\n    setCalcState(prev => {\n      // clear instruction\n      if (prediction === \"clear\") {\n        return {\n          num1: \"\",\n          operator: \"\",\n          num2: \"\",\n          result: \"\",\n          activeBlock: \"num1\"\n        };\n      }\n\n      // Si hay un resultado previo y se detecta un número, reiniciamos el cálculo\n      if (prev.result !== '' && !isNaN(Number(prediction))) {\n        return {\n          num1: prediction,\n          operator: '',\n          num2: '',\n          result: '',\n          activeBlock: 'operator'\n        };\n      }\n\n      // numeric\n      if (!isNaN(Number(prediction)) || prediction === '.') {\n        const char = prediction;\n        if (prev.activeBlock === 'num1') {\n          if (char === '.' && prev.num1.includes('.')) return prev;\n          return {\n            ...prev,\n            num1: prev.num1 + char,\n            activeBlock: 'operator'\n          };\n        }\n        if (prev.activeBlock === 'num2') {\n          if (char === '.' && prev.num2.includes('.')) return prev;\n          // Si se agrega al num2, se marca como 'complete' para habilitar el botón de resultado\n          return {\n            ...prev,\n            num2: prev.num2 + char,\n            activeBlock: 'complete'\n          };\n        }\n        return prev;\n      }\n\n      // operator\n      if ([\"+\", \"-\", \"*\", \"/\"].includes(prediction)) {\n        if (prev.num1 && prev.activeBlock === \"operator\" || prev.activeBlock === \"num2\" || prev.activeBlock === \"complete\") {\n          return {\n            ...prev,\n            operator: prediction,\n            num2: \"\",\n            activeBlock: \"num2\"\n          };\n        }\n        return prev;\n      }\n\n      // equal (Ahora ignora la seña y requiere el botón)\n      if (prediction === \"equal\") {\n        if (prev.num1 && prev.operator && prev.num2) {\n          toast(\"Presiona 'Calcular Resultado' para terminar la operación.\", {\n            icon: \"👆\"\n          });\n        }\n        return prev;\n      }\n      return prev;\n    });\n  }, []);\n\n  // recognition function\n  const recognizeSign = useCallback(async (isAuto = false) => {\n    if (!currentLandmarksRef.current) {\n      if (!isAuto) toast.error(\"No se detecta la mano\");\n      return;\n    }\n    if (isPredicting) return;\n    setIsPredicting(true);\n    try {\n      const payload = {\n        modelId,\n        landmarks: currentLandmarksRef.current\n      };\n      const response = await api.post(\"/prediction/predict\", payload);\n      const {\n        prediction,\n        confidence\n      } = response.data;\n      if (confidence < MIN_CONFIDENCE_THRESHOLD) {\n        if (!isAuto) toast.error(\"Seña no clara\");\n        lastPredictionRef.current = null;\n        return;\n      }\n\n      // avoid repeating same prediction rapidly in auto mode\n      if (isAuto && prediction === lastPredictionRef.current) {\n        return;\n      }\n      lastPredictionRef.current = prediction;\n      processPrediction(prediction);\n    } catch (err) {\n      console.error(\"Error en predict:\", err);\n      if (!isAuto) toast.error(\"Error comunicando con el modelo\");\n    } finally {\n      setIsPredicting(false);\n    }\n  }, [modelId, isPredicting, processPrediction]);\n\n  // auto recognition effect\n  /**\r\n   * CORRECCIÓN 3/3 (Manejo de 'null' en clearInterval para tipado de referencia)\r\n   */\n  useEffect(() => {\n    if (cameraActive && isAutoRecognizing) {\n      if (recognitionIntervalRef.current !== null) {\n        clearInterval(recognitionIntervalRef.current);\n      }\n\n      // El resultado de setInterval es un número (ID de intervalo), que es el tipo esperado.\n      const id = window.setInterval(() => {\n        if (currentLandmarksRef.current) recognizeSign(true);\n      }, RECOGNITION_INTERVAL_MS);\n      // Asignación segura del ID (number)\n      recognitionIntervalRef.current = id;\n      return () => {\n        if (recognitionIntervalRef.current !== null) {\n          clearInterval(recognitionIntervalRef.current);\n          recognitionIntervalRef.current = null;\n        }\n      };\n    } else {\n      if (recognitionIntervalRef.current !== null) {\n        clearInterval(recognitionIntervalRef.current);\n        recognitionIntervalRef.current = null;\n      }\n    }\n  }, [cameraActive, isAutoRecognizing, recognizeSign]);\n\n  // cleanup on unmount\n  useEffect(() => {\n    return () => {\n      stopCamera();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const isReadyToCalculate = !!(calcState.num1 && calcState.operator && calcState.num2);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-1 md:grid-cols-4 gap-8 p-4 font-['Inter']\",\n    children: [\"\\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"md:col-span-1 space-y-6\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `rounded-2xl shadow-xl p-5 ${isDarkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-white border border-gray-200\"}`,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `font-extrabold text-xl mb-4 ${isDarkMode ? \"text-white\" : \"text-gray-900\"}`,\n          children: \"Controles\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(motion.button, {\n          whileHover: {\n            scale: 1.02\n          },\n          whileTap: {\n            scale: 0.98\n          },\n          onClick: cameraActive ? stopCamera : startCamera,\n          disabled: isInitializing,\n          className: `w-full px-4 py-3 rounded-xl font-bold text-white transition-all duration-300 flex items-center justify-center gap-2 shadow-lg ${isInitializing ? \"bg-gray-500 cursor-not-allowed\" : cameraActive ? \"bg-red-600 hover:bg-red-700\" : \"bg-blue-600 hover:bg-blue-700\"}`,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", isInitializing ? /*#__PURE__*/_jsxDEV(RefreshCw, {\n            className: \"animate-spin w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 31\n          }, this) : /*#__PURE__*/_jsxDEV(Power, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 80\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", isInitializing ? \"Inicializando...\" : cameraActive ? \"Detener Cámara\" : \"Iniciar Cámara\", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", cameraActive && /*#__PURE__*/_jsxDEV(motion.button, {\n          whileHover: {\n            scale: 1.02\n          },\n          whileTap: {\n            scale: 0.98\n          },\n          onClick: () => setIsAutoRecognizing(p => !p),\n          className: `mt-3 w-full px-4 py-3 rounded-xl font-bold text-white transition-all duration-300 flex items-center justify-center gap-2 shadow-lg ${isAutoRecognizing ? \"bg-purple-600 hover:bg-purple-700\" : \"bg-yellow-600 hover:bg-yellow-700\"}`,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(Zap, {\n            className: `w-5 h-5 ${isAutoRecognizing ? \"animate-pulse\" : \"\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 15\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", isAutoRecognizing ? \"Reconocimiento Automático ON\" : \"Activar Reconocimiento\", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", cameraActive && !isAutoRecognizing && /*#__PURE__*/_jsxDEV(motion.button, {\n          whileHover: {\n            scale: 1.02\n          },\n          whileTap: {\n            scale: 0.98\n          },\n          onClick: () => recognizeSign(false),\n          disabled: isPredicting || !handsDetected,\n          className: `mt-3 w-full px-4 py-3 rounded-xl font-bold text-white transition-all duration-300 flex items-center justify-center gap-2 ${isPredicting ? \"bg-indigo-400 cursor-wait\" : \"bg-indigo-600 hover:bg-indigo-700\"} disabled:opacity-50`,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", isPredicting ? /*#__PURE__*/_jsxDEV(RefreshCw, {\n            className: \"animate-spin w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 31\n          }, this) : \"✋\", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Reconocer Se\\xF1a (Manual) \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 13\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", (calcState.num1 || calcState.operator || calcState.num2) && /*#__PURE__*/_jsxDEV(motion.button, {\n          whileHover: {\n            scale: 1.02\n          },\n          whileTap: {\n            scale: 0.98\n          },\n          onClick: resetCalculator,\n          className: \"mt-3 w-full px-4 py-3 rounded-xl font-bold text-white transition-all duration-300 flex items-center justify-center gap-2 bg-pink-600 hover:bg-pink-700 shadow-lg\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(RefreshCw, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 15\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Limpiar Calculadora \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 13\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `rounded-2xl shadow-xl p-5 ${isDarkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-white border border-gray-200\"}`,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `font-extrabold text-xl mb-2 ${isDarkMode ? \"text-white\" : \"text-gray-900\"}`,\n          children: \"Estado del Sistema\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 11\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"flex items-center gap-2 font-medium\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", handsDetected ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-500 flex items-center gap-2\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 17\n            }, this), \" Mano detectada \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-500 flex items-center gap-2\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(XCircle, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 17\n            }, this), \" Esperando mano \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 15\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", isAutoRecognizing && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"flex items-center gap-2 mt-2 text-purple-500 font-medium\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(Zap, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 15\n          }, this), \" Reconocimiento Autom\\xE1tico Activo \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 13\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 9\n      }, this), \"\\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this), \"\\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"md:col-span-3 space-y-6\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(motion.h2, {\n        initial: {\n          opacity: 0,\n          y: 10\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        className: `text-3xl font-extrabold text-center ${isDarkMode ? \"text-blue-300\" : \"text-gray-800\"}`,\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Calculadora con Lenguaje de Se\\xF1as \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 9\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative bg-black rounded-2xl overflow-hidden shadow-2xl mx-auto max-w-2xl aspect-video\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          className: \"hidden\",\n          autoPlay: true,\n          muted: true,\n          playsInline: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          width: 640,\n          height: 480,\n          className: \"w-full h-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 11\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", !cameraActive && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 flex flex-col items-center justify-center bg-gray-900/90 text-white p-4\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(Power, {\n            className: \"w-10 h-10 mb-3 text-red-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 15\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-medium\",\n            children: \"Pulsa \\\"Iniciar C\\xE1mara\\\" para comenzar.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 15\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", isInitializing && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2 text-sm text-gray-400 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n              className: \"w-5 h-5 animate-spin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 100\n            }, this), \" Cargando...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 34\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 13\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-2xl mx-auto p-4 rounded-2xl shadow-2xl space-y-4\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-5 gap-4 items-center\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-2\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(InputBlock, {\n              title: \"N\\xDAMERO 1\",\n              value: calcState.num1,\n              isActive: calcState.activeBlock === \"num1\",\n              dark: isDarkMode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 15\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 13\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-1\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(InputBlock, {\n              title: \"SE\\xD1A\",\n              value: calcState.operator,\n              isActive: calcState.activeBlock === \"operator\",\n              dark: isDarkMode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 15\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 13\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-2\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(InputBlock, {\n              title: \"N\\xDAMERO 2\",\n              value: calcState.num2,\n              isActive: calcState.activeBlock === \"num2\",\n              dark: isDarkMode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 15\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 13\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          onClick: calculateResult,\n          disabled: !isReadyToCalculate,\n          whileHover: {\n            scale: isReadyToCalculate ? 1.01 : 1\n          },\n          whileTap: {\n            scale: isReadyToCalculate ? 0.99 : 1\n          },\n          className: `w-full py-4 rounded-xl font-bold text-lg transition-all duration-300 shadow-xl flex items-center justify-center gap-3 mt-4 ${isReadyToCalculate ? \"bg-green-600 hover:bg-green-700 text-white\" : \"bg-gray-400 text-gray-700 cursor-not-allowed\"}`,\n          children: [/*#__PURE__*/_jsxDEV(Equal, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 15\n          }, this), \"CALCULAR RESULTADO\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 11\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `w-full p-6 rounded-2xl shadow-inner transition-colors duration-300 ${isDarkMode ? \"bg-gray-700 border-2 border-indigo-600\" : \"bg-white border-2 border-indigo-400\"}`,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `text-right text-sm uppercase font-semibold ${isDarkMode ? \"text-indigo-400\" : \"text-indigo-600\"}`,\n            children: \"Resultado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 13\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `text-right text-6xl font-extrabold mt-1 transition-colors duration-300 ${isDarkMode ? \"text-white\" : \"text-gray-900\"}`,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(motion.span, {\n              initial: {\n                y: 20,\n                opacity: 0\n              },\n              animate: {\n                y: 0,\n                opacity: 1\n              },\n              transition: {\n                duration: 0.3\n              },\n              children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", calcState.result || \"0\", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n            }, calcState.result, true, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 15\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 13\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 11\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 9\n      }, this), \"\\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 7\n    }, this), \"\\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 472,\n    columnNumber: 5\n  }, this);\n};\n_s(SignLanguageCalculator, \"qTe34q+G5ggf7M1JpXsOR9snQyY=\");\n_c2 = SignLanguageCalculator;\nexport default SignLanguageCalculator;\nvar _c, _c2;\n$RefreshReg$(_c, \"InputBlock\");\n$RefreshReg$(_c2, \"SignLanguageCalculator\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","useMemo","motion","XCircle","CheckCircle","RefreshCw","Power","Zap","Equal","toast","jsxDEV","_jsxDEV","api","post","path","data","mockPredictions","randomPrediction","Math","floor","random","length","Promise","resolve","setTimeout","prediction","confidence","createMediaPipeHandler","stream","animationFrameId","videoElement","canvasElement","onResultsCallback","runDetectionLoop","hasHands","mockResults","multiHandLandmarks","Array","from","_","i","x","y","z","visibility","image","multiHandedness","label","score","canvasCtx","getContext","save","clearRect","width","height","readyState","HAVE_ENOUGH_DATA","drawImage","fillStyle","fillRect","font","textAlign","fillText","restore","requestAnimationFrame","initialize","video","canvas","onResults","navigator","mediaDevices","getUserMedia","srcObject","onloadedmetadata","play","error","console","stop","cancelAnimationFrame","getTracks","forEach","track","RECOGNITION_INTERVAL_MS","MIN_CONFIDENCE_THRESHOLD","safeEvaluateExpression","expr","sanitized","replace","val","Function","isFinite","String","InputBlock","title","value","isActive","dark","base","bg","border","text","titleColor","div","className","animate","scale","transition","type","stiffness","damping","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","SignLanguageCalculator","modelId","_s","videoRef","canvasRef","mediaPipeHandler","cameraActive","setCameraActive","isInitializing","setIsInitializing","handsDetected","setHandsDetected","isAutoRecognizing","setIsAutoRecognizing","isPredicting","setIsPredicting","calcState","setCalcState","num1","operator","num2","result","activeBlock","lastPredictionRef","currentLandmarksRef","recognitionIntervalRef","isDarkMode","document","body","classList","contains","results","landmarks","handedness","chosen","rightIndex","findIndex","h","_h$label","_h$label$toLowerCase","toLowerCase","call","current","map","l","startCamera","ok","Error","success","err","stopCamera","clearInterval","resetCalculator","calculateResult","prev","icon","expression","evalResult","processPrediction","isNaN","Number","char","includes","recognizeSign","isAuto","payload","response","id","window","setInterval","isReadyToCalculate","button","whileHover","whileTap","onClick","disabled","p","h2","initial","opacity","ref","autoPlay","muted","playsInline","span","duration","_c2","$RefreshReg$"],"sources":["C:/Users/quisp/Desktop/FinalProject/frontend/src/components/SignLanguageCalculator.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback, useMemo } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport {\r\n  XCircle,\r\n  CheckCircle,\r\n  RefreshCw,\r\n  Power,\r\n  Zap,\r\n  Equal, // Icono para el botón de cálculo\r\n} from \"lucide-react\"; \r\nimport toast from \"react-hot-toast\";\r\n\r\n// --- TIPOS Y SIMULACIONES para entorno de archivo único ---\r\n// Tipos simulados de MediaPipe (se asume que el archivo original tenía tipado)\r\ninterface Results {\r\n    multiHandLandmarks: any[] | null;\r\n    image: HTMLCanvasElement;\r\n    multiHandedness: any[] | null;\r\n}\r\n\r\n// Implementación Simulada de la API\r\nconst api = {\r\n  post: async (path: string, data: any) => {\r\n    // ... Lógica de simulación (mantenida del archivo anterior)\r\n    const mockPredictions = [\"1\", \"2\", \"3\", \"4\", \"+\", \"*\", \"equal\", \"clear\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"/\"];\r\n    const randomPrediction = mockPredictions[Math.floor(Math.random() * mockPredictions.length)];\r\n    await new Promise(resolve => setTimeout(resolve, 150)); \r\n    return { \r\n        data: { \r\n            prediction: randomPrediction, \r\n            confidence: Math.random() * 0.3 + 0.7\r\n        }\r\n    };\r\n  }\r\n};\r\n\r\n// Implementación Simulada de MediaPipeHandler\r\ninterface MediaPipeHandler {\r\n    initialize: (videoElement: HTMLVideoElement, canvasElement: HTMLCanvasElement, onResults: (results: Results) => void) => Promise<boolean>;\r\n    stop: () => void;\r\n}\r\n\r\nconst createMediaPipeHandler = (): MediaPipeHandler => {\r\n    let stream: MediaStream | null = null;\r\n    let animationFrameId: number | null = null;\r\n    let videoElement: HTMLVideoElement | null = null;\r\n    let canvasElement: HTMLCanvasElement | null = null;\r\n    let onResultsCallback: ((results: Results) => void) | null = null;\r\n\r\n    const runDetectionLoop = () => {\r\n        if (!videoElement || !canvasElement || !onResultsCallback) return;\r\n\r\n        // SIMULACIÓN DE DETECCIÓN Y RESULTADOS\r\n        const hasHands = stream && Math.random() > 0.3; // Simula detección\r\n        const mockResults: Results = {\r\n            multiHandLandmarks: hasHands ? [\r\n                Array.from({ length: 21 }, (_, i) => ({\r\n                    x: Math.random(), y: Math.random(), z: Math.random(), visibility: 1\r\n                }))\r\n            ] : null, // Puede ser NULL, como indica el error de TS\r\n            image: canvasElement,\r\n            multiHandedness: hasHands ? [{ label: 'Right', score: 0.9 }] : null,\r\n        } as unknown as Results; \r\n\r\n        onResultsCallback(mockResults);\r\n\r\n        // Dibujo en Canvas\r\n        const canvasCtx = canvasElement.getContext('2d');\r\n        if (canvasCtx) {\r\n            canvasCtx.save();\r\n            canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\r\n\r\n            if (videoElement.readyState === videoElement.HAVE_ENOUGH_DATA) {\r\n                canvasCtx.drawImage(videoElement, 0, 0, canvasElement.width, canvasElement.height);\r\n            }\r\n            \r\n            if (!stream) {\r\n                canvasCtx.fillStyle = 'white';\r\n                canvasCtx.fillRect(0, 0, canvasElement.width, canvasElement.height);\r\n                canvasCtx.fillStyle = 'black';\r\n                canvasCtx.font = '24px Inter, sans-serif';\r\n                canvasCtx.textAlign = 'center';\r\n                canvasCtx.fillText('Cámara detenida', canvasElement.width / 2, canvasElement.height / 2);\r\n            }\r\n            canvasCtx.restore();\r\n        }\r\n\r\n        animationFrameId = requestAnimationFrame(runDetectionLoop);\r\n    };\r\n\r\n    const initialize = async (video: HTMLVideoElement, canvas: HTMLCanvasElement, onResults: (results: Results) => void) => {\r\n        videoElement = video;\r\n        canvasElement = canvas;\r\n        onResultsCallback = onResults;\r\n\r\n        try {\r\n            stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n            video.srcObject = stream;\r\n            \r\n            await new Promise((resolve) => {\r\n                video.onloadedmetadata = () => {\r\n                    video.play();\r\n                    resolve(true);\r\n                };\r\n            });\r\n\r\n            runDetectionLoop();\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Error al acceder a la cámara:\", error);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const stop = () => {\r\n        if (animationFrameId !== null) {\r\n            cancelAnimationFrame(animationFrameId);\r\n            animationFrameId = null;\r\n        }\r\n        if (stream) {\r\n            stream.getTracks().forEach(track => track.stop());\r\n            stream = null;\r\n            if (videoElement) {\r\n                videoElement.srcObject = null;\r\n            }\r\n        }\r\n    };\r\n\r\n    return { initialize, stop };\r\n};\r\n// -------------------------------------------------------------------\r\n\r\n\r\n/**\r\n * Props\r\n */\r\ntype Props = {\r\n  modelId: string;\r\n};\r\n\r\n/**\r\n * Constants\r\n */\r\nconst RECOGNITION_INTERVAL_MS = 650;\r\nconst MIN_CONFIDENCE_THRESHOLD = 0.7;\r\n\r\n/**\r\n * Safe evaluation (sanitizado)\r\n */\r\nconst safeEvaluateExpression = (expr: string): string => {\r\n  const sanitized = expr.replace(/[^0-9+\\-*/.]/g, \"\");\r\n  if (!sanitized) return \"0\";\r\n  try {\r\n    // eslint-disable-next-line no-new-func\r\n    const val = Function(`\"use strict\"; return (${sanitized});`)();\r\n    if (typeof val === \"number\" && isFinite(val)) return String(val);\r\n    return \"Error\";\r\n  } catch {\r\n    return \"Error\";\r\n  }\r\n};\r\n\r\ninterface CalculationState {\r\n  num1: string;\r\n  operator: string;\r\n  num2: string;\r\n  result: string;\r\n  activeBlock: \"num1\" | \"operator\" | \"num2\" | \"complete\";\r\n}\r\n\r\n/**\r\n * UI InputBlock\r\n */\r\nconst InputBlock: React.FC<{ title: string; value: string; isActive: boolean; dark?: boolean }> = ({ title, value, isActive, dark }) => {\r\n  const base = \"p-4 rounded-xl font-bold text-center border-2 transition-all duration-300 shadow-md\";\r\n  const bg = dark ? \"bg-gray-800\" : \"bg-white\";\r\n  const border = isActive ? \"border-indigo-400 ring-4 ring-indigo-500/30\" : dark ? \"border-gray-600\" : \"border-gray-300\";\r\n  const text = dark ? \"text-white\" : \"text-gray-900\";\r\n  const titleColor = dark ? \"text-gray-400\" : \"text-gray-600\";\r\n\r\n  return (\r\n    <motion.div\r\n      className={`${base} ${bg} ${border}`}\r\n      animate={{ scale: isActive ? 1.03 : 1 }}\r\n      transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\r\n    >\r\n      <p className={`text-sm uppercase tracking-wider ${titleColor}`}>{title}</p>\r\n      <div className={`text-3xl mt-1 ${text}`}>{value || (isActive ? \"✋\" : \"—\")}</div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n/**\r\n * Component\r\n */\r\nconst SignLanguageCalculator: React.FC<Props> = ({ modelId }) => {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  // Renombrado de mpHandler a mediaPipeHandler para consistencia\r\n  const mediaPipeHandler = useRef<MediaPipeHandler | null>(null); \r\n\r\n  const [cameraActive, setCameraActive] = useState(false);\r\n  const [isInitializing, setIsInitializing] = useState(false);\r\n  const [handsDetected, setHandsDetected] = useState(false);\r\n  const [isAutoRecognizing, setIsAutoRecognizing] = useState(true);\r\n  const [isPredicting, setIsPredicting] = useState(false);\r\n\r\n  const [calcState, setCalcState] = useState<CalculationState>({\r\n    num1: \"\",\r\n    operator: \"\",\r\n    num2: \"\",\r\n    result: \"\",\r\n    activeBlock: \"num1\",\r\n  });\r\n\r\n  const lastPredictionRef = useRef<string | null>(null);\r\n  const currentLandmarksRef = useRef<any[] | null>(null);\r\n  const recognitionIntervalRef = useRef<number | null>(null);\r\n\r\n  const isDarkMode = useMemo(() => document.body.classList.contains(\"dark\"), []);\r\n\r\n  /**\r\n   * CORRECCIÓN 1/3 (Manejo de null en multiHandLandmarks)\r\n   * MediaPipe results callback (support for up to 2 hands)\r\n   */\r\n  const onResults = useCallback((results: Results) => {\r\n    // Verificar si multiHandLandmarks es null o si su longitud es 0.\r\n    const hasHands = !!(results.multiHandLandmarks && results.multiHandLandmarks.length > 0);\r\n    setHandsDetected(hasHands);\r\n\r\n    // Si hay manos, procesar. Si no, currentLandmarksRef.current será null.\r\n    if (hasHands) {\r\n      const landmarks = results.multiHandLandmarks!; // Aseguramos que no es null aquí\r\n      const handedness = results.multiHandedness;\r\n      \r\n      let chosen = landmarks[0];\r\n      \r\n      // Preferir la mano derecha si está presente y hay datos de handedness\r\n      if (handedness && handedness.length > 0) {\r\n        const rightIndex = handedness.findIndex((h: any) => h.label?.toLowerCase?.() === \"right\");\r\n        if (rightIndex >= 0 && landmarks[rightIndex]) {\r\n          chosen = landmarks[rightIndex];\r\n        }\r\n      }\r\n      \r\n      // Verificar la estructura de la mano elegida\r\n      if (chosen && chosen.length === 21) {\r\n        currentLandmarksRef.current = chosen.map((l: any) => ({ x: l.x, y: l.y, z: l.z }));\r\n      } else {\r\n        currentLandmarksRef.current = null;\r\n      }\r\n    } else {\r\n      currentLandmarksRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  // start / stop camera\r\n  const startCamera = useCallback(async () => {\r\n    if (!videoRef.current || !canvasRef.current) {\r\n      toast.error(\"No se encontró video/canvas\");\r\n      return;\r\n    }\r\n    setIsInitializing(true);\r\n    try {\r\n      if (mediaPipeHandler.current) mediaPipeHandler.current.stop();\r\n      mediaPipeHandler.current = createMediaPipeHandler();\r\n      const ok = await mediaPipeHandler.current.initialize(videoRef.current, canvasRef.current, onResults);\r\n      if (!ok) throw new Error(\"Error inicializando MediaPipe\");\r\n      setCameraActive(true);\r\n      setIsAutoRecognizing(true);\r\n      toast.success(\"Cámara iniciada\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(\"No se pudo iniciar la cámara\");\r\n    } finally {\r\n      setIsInitializing(false);\r\n    }\r\n  }, [onResults]);\r\n\r\n  /**\r\n   * CORRECCIÓN 2/3 (Manejo de 'null' en clearInterval para tipado de referencia)\r\n   */\r\n  const stopCamera = useCallback(() => {\r\n    if (mediaPipeHandler.current) mediaPipeHandler.current.stop();\r\n    setCameraActive(false);\r\n    setIsAutoRecognizing(false);\r\n    setHandsDetected(false);\r\n    currentLandmarksRef.current = null;\r\n    lastPredictionRef.current = null;\r\n\r\n    if (recognitionIntervalRef.current !== null) {\r\n      // ⚠️ CORRECCIÓN AQUÍ: Simplemente llamamos a clearInterval.\r\n      // Ya no intentamos asignar su valor de retorno, que puede ser 'null', \r\n      // a 'recognitionIntervalRef.current' que es de tipo 'number | null'.\r\n      // En su lugar, lo establecemos explícitamente a 'null' después de limpiar.\r\n      clearInterval(recognitionIntervalRef.current);\r\n      recognitionIntervalRef.current = null; \r\n    }\r\n    toast.success(\"Cámara detenida\");\r\n  }, []);\r\n\r\n  // reset calculator state\r\n  const resetCalculator = useCallback(() => {\r\n    setCalcState({ num1: \"\", operator: \"\", num2: \"\", result: \"\", activeBlock: \"num1\" });\r\n  }, []);\r\n  \r\n  /**\r\n   * NUEVA FUNCIÓN: Ejecuta la lógica de cálculo y actualiza el estado del resultado.\r\n   */\r\n  const calculateResult = useCallback(() => {\r\n    setCalcState(prev => {\r\n      if (!prev.num1 || !prev.operator || !prev.num2) {\r\n          toast.error(\"Asegúrate de tener un número, un operador y otro número.\", { icon: \"🤔\" });\r\n          return prev;\r\n      }\r\n\r\n      const expression = `${prev.num1}${prev.operator}${prev.num2}`;\r\n      const evalResult = safeEvaluateExpression(expression);\r\n\r\n      if (evalResult === \"Error\") {\r\n          toast.error(\"Expresión inválida\", { icon: \"⚠️\" });\r\n          return { ...prev, result: \"Error\" };\r\n      }\r\n\r\n      // Cálculo exitoso: movemos el resultado a num1 y limpiamos para encadenar\r\n      toast.success(`Resultado: ${evalResult}`, { icon: \"✅\" });\r\n      return { \r\n          num1: evalResult, // El resultado se convierte en el Num1 para encadenar\r\n          operator: '', \r\n          num2: '', \r\n          result: evalResult, \r\n          activeBlock: 'operator' // Esperamos el siguiente operador\r\n      };\r\n    });\r\n  }, []);\r\n\r\n\r\n  // process prediction into calculation state\r\n  const processPrediction = useCallback((prediction: string) => {\r\n    setCalcState((prev) => {\r\n      // clear instruction\r\n      if (prediction === \"clear\") {\r\n        return { num1: \"\", operator: \"\", num2: \"\", result: \"\", activeBlock: \"num1\" };\r\n      }\r\n\r\n    // Si hay un resultado previo y se detecta un número, reiniciamos el cálculo\r\n    if (prev.result !== '' && !isNaN(Number(prediction))) {\r\n      return { num1: prediction, operator: '', num2: '', result: '', activeBlock: 'operator' };\r\n    }\r\n\r\n\r\n      // numeric\r\n    if (!isNaN(Number(prediction)) || prediction === '.') {\r\n        const char = prediction;\r\n        if (prev.activeBlock === 'num1') {\r\n            if (char === '.' && prev.num1.includes('.')) return prev;\r\n            return { ...prev, num1: prev.num1 + char, activeBlock: 'operator' };\r\n        }\r\n        if (prev.activeBlock === 'num2') {\r\n            if (char === '.' && prev.num2.includes('.')) return prev;\r\n            // Si se agrega al num2, se marca como 'complete' para habilitar el botón de resultado\r\n            return { ...prev, num2: prev.num2 + char, activeBlock: 'complete' };\r\n        }\r\n        return prev;\r\n    }\r\n\r\n      // operator\r\n      if ([\"+\", \"-\", \"*\", \"/\"].includes(prediction)) {\r\n        if (prev.num1 && prev.activeBlock === \"operator\" || prev.activeBlock === \"num2\" || prev.activeBlock === \"complete\") {\r\n          return { ...prev, operator: prediction, num2: \"\", activeBlock: \"num2\" };\r\n        }\r\n        return prev;\r\n      }\r\n\r\n      // equal (Ahora ignora la seña y requiere el botón)\r\n      if (prediction === \"equal\") {\r\n        if (prev.num1 && prev.operator && prev.num2) {\r\n            toast(\"Presiona 'Calcular Resultado' para terminar la operación.\", { icon: \"👆\" });\r\n        }\r\n        return prev;\r\n      }\r\n\r\n      return prev;\r\n    });\r\n  }, []);\r\n\r\n  // recognition function\r\n  const recognizeSign = useCallback(\r\n    async (isAuto = false) => {\r\n      if (!currentLandmarksRef.current) {\r\n        if (!isAuto) toast.error(\"No se detecta la mano\");\r\n        return;\r\n      }\r\n      if (isPredicting) return;\r\n      setIsPredicting(true);\r\n\r\n      try {\r\n        const payload = {\r\n          modelId,\r\n          landmarks: currentLandmarksRef.current,\r\n        };\r\n\r\n        const response = await api.post(\"/prediction/predict\", payload);\r\n        const { prediction, confidence } = response.data;\r\n\r\n        if (confidence < MIN_CONFIDENCE_THRESHOLD) {\r\n          if (!isAuto) toast.error(\"Seña no clara\");\r\n          lastPredictionRef.current = null;\r\n          return;\r\n        }\r\n\r\n        // avoid repeating same prediction rapidly in auto mode\r\n        if (isAuto && prediction === lastPredictionRef.current) {\r\n          return;\r\n        }\r\n        lastPredictionRef.current = prediction;\r\n\r\n        processPrediction(prediction);\r\n      } catch (err) {\r\n        console.error(\"Error en predict:\", err);\r\n        if (!isAuto) toast.error(\"Error comunicando con el modelo\");\r\n      } finally {\r\n        setIsPredicting(false);\r\n      }\r\n    },\r\n    [modelId, isPredicting, processPrediction]\r\n  );\r\n\r\n  // auto recognition effect\r\n  /**\r\n   * CORRECCIÓN 3/3 (Manejo de 'null' en clearInterval para tipado de referencia)\r\n   */\r\n  useEffect(() => {\r\n    if (cameraActive && isAutoRecognizing) {\r\n      if (recognitionIntervalRef.current !== null) {\r\n        clearInterval(recognitionIntervalRef.current);\r\n      }\r\n      \r\n      // El resultado de setInterval es un número (ID de intervalo), que es el tipo esperado.\r\n      const id = window.setInterval(() => {\r\n        if (currentLandmarksRef.current) recognizeSign(true);\r\n      }, RECOGNITION_INTERVAL_MS);\r\n      // Asignación segura del ID (number)\r\n      recognitionIntervalRef.current = id; \r\n\r\n      return () => {\r\n        if (recognitionIntervalRef.current !== null) {\r\n          clearInterval(recognitionIntervalRef.current);\r\n          recognitionIntervalRef.current = null;\r\n        }\r\n      };\r\n    } else {\r\n      if (recognitionIntervalRef.current !== null) {\r\n        clearInterval(recognitionIntervalRef.current);\r\n        recognitionIntervalRef.current = null;\r\n      }\r\n    }\r\n  }, [cameraActive, isAutoRecognizing, recognizeSign]);\r\n\r\n  // cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      stopCamera();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  \r\n  const isReadyToCalculate = !!(calcState.num1 && calcState.operator && calcState.num2);\r\n\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8 p-4 font-['Inter']\">\r\n      {/* SIDEBAR */}\r\n      <aside className=\"md:col-span-1 space-y-6\">\r\n        <div className={`rounded-2xl shadow-xl p-5 ${isDarkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-white border border-gray-200\"}`}>\r\n          <h3 className={`font-extrabold text-xl mb-4 ${isDarkMode ? \"text-white\" : \"text-gray-900\"}`}>Controles</h3>\r\n\r\n          <motion.button\r\n            whileHover={{ scale: 1.02 }}\r\n            whileTap={{ scale: 0.98 }}\r\n            onClick={cameraActive ? stopCamera : startCamera}\r\n            disabled={isInitializing}\r\n            className={`w-full px-4 py-3 rounded-xl font-bold text-white transition-all duration-300 flex items-center justify-center gap-2 shadow-lg ${\r\n              isInitializing ? \"bg-gray-500 cursor-not-allowed\" : cameraActive ? \"bg-red-600 hover:bg-red-700\" : \"bg-blue-600 hover:bg-blue-700\"\r\n            }`}\r\n          >\r\n            {isInitializing ? <RefreshCw className=\"animate-spin w-5 h-5\" /> : <Power className=\"w-5 h-5\" />}\r\n            {isInitializing ? \"Inicializando...\" : cameraActive ? \"Detener Cámara\" : \"Iniciar Cámara\"}\r\n          </motion.button>\r\n\r\n          {cameraActive && (\r\n            <motion.button\r\n              whileHover={{ scale: 1.02 }}\r\n              whileTap={{ scale: 0.98 }}\r\n              onClick={() => setIsAutoRecognizing((p) => !p)}\r\n              className={`mt-3 w-full px-4 py-3 rounded-xl font-bold text-white transition-all duration-300 flex items-center justify-center gap-2 shadow-lg ${\r\n                isAutoRecognizing ? \"bg-purple-600 hover:bg-purple-700\" : \"bg-yellow-600 hover:bg-yellow-700\"\r\n              }`}\r\n            >\r\n              <Zap className={`w-5 h-5 ${isAutoRecognizing ? \"animate-pulse\" : \"\"}`} />\r\n              {isAutoRecognizing ? \"Reconocimiento Automático ON\" : \"Activar Reconocimiento\"}\r\n            </motion.button>\r\n          )}\r\n\r\n          {cameraActive && !isAutoRecognizing && (\r\n            <motion.button\r\n              whileHover={{ scale: 1.02 }}\r\n              whileTap={{ scale: 0.98 }}\r\n              onClick={() => recognizeSign(false)}\r\n              disabled={isPredicting || !handsDetected}\r\n              className={`mt-3 w-full px-4 py-3 rounded-xl font-bold text-white transition-all duration-300 flex items-center justify-center gap-2 ${\r\n                isPredicting ? \"bg-indigo-400 cursor-wait\" : \"bg-indigo-600 hover:bg-indigo-700\"\r\n              } disabled:opacity-50`}\r\n            >\r\n              {isPredicting ? <RefreshCw className=\"animate-spin w-5 h-5\" /> : \"✋\"}\r\n              Reconocer Seña (Manual)\r\n            </motion.button>\r\n          )}\r\n\r\n          {(calcState.num1 || calcState.operator || calcState.num2) && (\r\n            <motion.button\r\n              whileHover={{ scale: 1.02 }}\r\n              whileTap={{ scale: 0.98 }}\r\n              onClick={resetCalculator}\r\n              className=\"mt-3 w-full px-4 py-3 rounded-xl font-bold text-white transition-all duration-300 flex items-center justify-center gap-2 bg-pink-600 hover:bg-pink-700 shadow-lg\"\r\n            >\r\n              <RefreshCw className=\"w-5 h-5\" />\r\n              Limpiar Calculadora\r\n            </motion.button>\r\n          )}\r\n        </div>\r\n\r\n        <div className={`rounded-2xl shadow-xl p-5 ${isDarkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-white border border-gray-200\"}`}>\r\n          <h3 className={`font-extrabold text-xl mb-2 ${isDarkMode ? \"text-white\" : \"text-gray-900\"}`}>Estado del Sistema</h3>\r\n          <p className=\"flex items-center gap-2 font-medium\">\r\n            {handsDetected ? (\r\n              <span className=\"text-green-500 flex items-center gap-2\">\r\n                <CheckCircle className=\"w-5 h-5\" /> Mano detectada\r\n              </span>\r\n            ) : (\r\n              <span className=\"text-red-500 flex items-center gap-2\">\r\n                <XCircle className=\"w-5 h-5\" /> Esperando mano\r\n              </span>\r\n            )}\r\n          </p>\r\n          {isAutoRecognizing && (\r\n            <p className=\"flex items-center gap-2 mt-2 text-purple-500 font-medium\">\r\n              <Zap className=\"w-5 h-5\" /> Reconocimiento Automático Activo\r\n            </p>\r\n          )}\r\n        </div>\r\n      </aside>\r\n\r\n      {/* MAIN */}\r\n      <section className=\"md:col-span-3 space-y-6\">\r\n        <motion.h2 initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} className={`text-3xl font-extrabold text-center ${isDarkMode ? \"text-blue-300\" : \"text-gray-800\"}`}>\r\n          Calculadora con Lenguaje de Señas\r\n        </motion.h2>\r\n\r\n        <div className=\"relative bg-black rounded-2xl overflow-hidden shadow-2xl mx-auto max-w-2xl aspect-video\">\r\n          <video ref={videoRef as any} className=\"hidden\" autoPlay muted playsInline />\r\n          <canvas ref={canvasRef as any} width={640} height={480} className=\"w-full h-full object-cover\" />\r\n          {!cameraActive && (\r\n            <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-gray-900/90 text-white p-4\">\r\n              <Power className=\"w-10 h-10 mb-3 text-red-400\" />\r\n              <p className=\"text-lg font-medium\">Pulsa \"Iniciar Cámara\" para comenzar.</p>\r\n              {isInitializing && <p className=\"mt-2 text-sm text-gray-400 flex items-center gap-2\"><RefreshCw className=\"w-5 h-5 animate-spin\" /> Cargando...</p>}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"max-w-2xl mx-auto p-4 rounded-2xl shadow-2xl space-y-4\">\r\n          <div className=\"grid grid-cols-5 gap-4 items-center\">\r\n            <div className=\"col-span-2\">\r\n              <InputBlock title=\"NÚMERO 1\" value={calcState.num1} isActive={calcState.activeBlock === \"num1\"} dark={isDarkMode} />\r\n            </div>\r\n            <div className=\"col-span-1\">\r\n              <InputBlock title=\"SEÑA\" value={calcState.operator} isActive={calcState.activeBlock === \"operator\"} dark={isDarkMode} />\r\n            </div>\r\n            <div className=\"col-span-2\">\r\n              <InputBlock title=\"NÚMERO 2\" value={calcState.num2} isActive={calcState.activeBlock === \"num2\"} dark={isDarkMode} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* BOTÓN DE CALCULAR RESULTADO */}\r\n          <motion.button\r\n              onClick={calculateResult}\r\n              disabled={!isReadyToCalculate}\r\n              whileHover={{ scale: isReadyToCalculate ? 1.01 : 1 }}\r\n              whileTap={{ scale: isReadyToCalculate ? 0.99 : 1 }}\r\n              className={`w-full py-4 rounded-xl font-bold text-lg transition-all duration-300 shadow-xl flex items-center justify-center gap-3 mt-4 ${\r\n                  isReadyToCalculate \r\n                      ? \"bg-green-600 hover:bg-green-700 text-white\" \r\n                      : \"bg-gray-400 text-gray-700 cursor-not-allowed\"\r\n              }`}\r\n          >\r\n              <Equal className=\"w-6 h-6\" />\r\n              CALCULAR RESULTADO\r\n          </motion.button>\r\n\r\n          <div className={`w-full p-6 rounded-2xl shadow-inner transition-colors duration-300 ${isDarkMode ? \"bg-gray-700 border-2 border-indigo-600\" : \"bg-white border-2 border-indigo-400\"}`}>\r\n            <p className={`text-right text-sm uppercase font-semibold ${isDarkMode ? \"text-indigo-400\" : \"text-indigo-600\"}`}>Resultado</p>\r\n            <div className={`text-right text-6xl font-extrabold mt-1 transition-colors duration-300 ${isDarkMode ? \"text-white\" : \"text-gray-900\"}`}>\r\n              <motion.span key={calcState.result} initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ duration: 0.3 }}>\r\n                {calcState.result || \"0\"}\r\n              </motion.span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignLanguageCalculator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}